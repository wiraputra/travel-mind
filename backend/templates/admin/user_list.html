{% extends 'admin/admin_base.html' %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1>Daftar Pengguna</h1>
  <a href="{{ url_for('.add_user') }}" class="btn btn-primary"
    >Buat User Baru</a
  >
</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Username</th>
        <th>Email</th>
        <th>Nama Lengkap</th>
        <th>Admin?</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users.items %}
      <tr>
        <td>{{ user.user_id }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.full_name or '-' }}</td>
        <td>
          <span
            class="badge {{ 'bg-success' if user.is_admin else 'bg-secondary' }}"
            >{{ 'Ya' if user.is_admin else 'Tidak' }}</span
          >
        </td>
        <td>
          <a
            href="{{ url_for('.edit_user', user_id=user.user_id) }}"
            class="btn btn-sm btn-warning"
            >Edit</a
          >
          <form
            action="{{ url_for('.delete_user', user_id=user.user_id) }}"
            method="post"
            class="d-inline"
            onsubmit="return confirm('Anda yakin ingin menghapus user ini?');"
          >
            <button type="submit" class="btn btn-sm btn-danger">Hapus</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="6" class="text-center">Tidak ada pengguna ditemukan.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- Pagination -->
{% if users.pages > 1 %}
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item {% if not users.has_prev %}disabled{% endif %}">
      <a
        class="page-link"
        href="{{ url_for('.users_list', page=users.prev_num) }}"
        >Sebelumnya</a
      >
    </li>
    {% for page_num in users.iter_pages(left_edge=1, right_edge=1,
    left_current=1, right_current=2) %} {% if page_num %}
    <li class="page-item {% if users.page == page_num %}active{% endif %}">
      <a class="page-link" href="{{ url_for('.users_list', page=page_num) }}"
        >{{ page_num }}</a
      >
    </li>
    {% else %}
    <li class="page-item disabled"><span class="page-link">â€¦</span></li>
    {% endif %} {% endfor %}
    <li class="page-item {% if not users.has_next %}disabled{% endif %}">
      <a
        class="page-link"
        href="{{ url_for('.users_list', page=users.next_num) }}"
        >Berikutnya</a
      >
    </li>
  </ul>
</nav>
{% endif %} {% endblock %}
